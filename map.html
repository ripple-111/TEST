<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="Keywords" content="湖南工商大学招生就业指导处 云就业 高校 大学 大学生 就业 就业网 就业信息网 就业指导 就业指导中心 就业中心 创业 创业指导" />
    <meta name="Description" content="湖南工商大学招生就业指导处 云就业 高校 大学 大学生 就业 就业网 就业信息网 就业指导 就业指导中心 就业中心 创业 创业指导" />
    <title>就业政策地图</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.1/echarts.min.js"></script>
    <script src="https://upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.1.min.js"></script>
    <script src="dat.gui.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;

        }

        body {
            background-color: #f0f0f0;
        }

        .info {
            display: block;
            text-decoration: none;
            color: black;
            word-wrap: break-word;
            text-indent: 1em;
        }

        .info:hover {
            color: white;
            background-color: rgba(111, 111, 111, 0.3);
        }

        .side {

            flex: 1;
            /* padding: 0 0 0 5px; */
            height: 650px;
            background: white;
            position: relative
        }

        li {
            font-size: 18px;
            margin-top: 20px;
            line-height: 30px;
            text-overflow: ellipsis;
            display: -webkit-box;
            overflow: hidden;
            list-style: inside;
            border-bottom: 1px dashed black;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .swipe-list {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
        }

        .swipe-item {
            position: relative;
            width: 100%;
        }

        @media screen and (max-width:1000px) {
            #map {
                width: 100% !important;
                margin-bottom: 50px;
                margin-right: 0px !important;
            }

            .side {
                height: calc(100vh - 1000px) !important;
            }
        }
    </style>
</head>

<body style=" background: url(https://www.hutb.edu.cn/www/template/images/bg.png) repeat-x;">
    <div class="header" id="swipe-header" style="background-color:#fff;">
        <div class="inner clearfix" id="inner-clearfix">
            <!-- 语言切换 -->
            <div class="logo" id="logo">
                <a href="javascript:;" class="logo-link" style="height: 100%;">
                    <img src="http://yun-campus-res.oss-cn-shenzhen.aliyuncs.com/school/1560476083-7801.png">
                </a>
            </div>
        </div>
    </div>

    <div style="display:flex;flex-direction:column;margin-top: 10px;">
        <div class="container" style="flex:1 1 auto;min-height: 400px;margin:10px;">
            <div class="inner"
                style="margin: 0 auto;min-height:500px;box-shadow: 0 0 5px rgb(0 0 0 / 10%);width:90vw;display: flex;flex-wrap: wrap;">
                <div id="map" style="height:650px;width:70%;margin-right: 20px;">
                    <p style="font-size:22px;text-align:center;margin-top:100px">加载中...</p>
                </div>
                <div class="side" >
                    <p style="text-align:center;height:5%;font-Weight:700;font-size: 20px;text-decoration: underline;" id="title">
                        就业政策
                    </p>
                    <a style="display:block;color:black;width:70%;height: 100%;position:absolute;top:0"
                            href="http://rst.hunan.gov.cn/rst/xxgk/zcfg/zcjd/201909/t20190929_10468818.html"
                            target="_blank"></a>
                    <!-- <ul style="margin-top:10px" id="list">
                        <li style="text-align:center;font-size: 20px;color:gray;margin-top: 100px;border: none;">请在地图选择你想了解的省份</li>
                    </ul> -->
                    <iframe src="http://rst.hunan.gov.cn/rst/xxgk/zcfg/zcjd/201909/t20190929_10468818.html" title="就业政策"
                        height="95%" width="100%" style="border:none;box-sizing: border-box;display: block;">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="module">
    // const gui=new dat.GUI()
    let region = [{ 湖南省: 'http://rst.hunan.gov.cn/rst/xxgk/zcfg/zcjd/201909/t20190929_10468818.html' },
    { 广东省: 'http://hrss.gd.gov.cn/zwfw/mdml/content/post_3063710.html' },
    { 海南省: 'http://hrss.hainan.gov.cn/hrss/0503/202207/9dfc4cbce46e4801b4b7a1104cfef5db.shtml' },
    { 广西省: 'http://rst.gxzf.gov.cn/zwgk/xxgkzcfg/xxgkwjjd/ycmh/t13170327.shtml' },
    { 湖北省: 'http://www.mohrss.gov.cn/wap/xw/dfdt/202207/t20220707_456716.html' },
    { 江西省: 'http://rst.jiangxi.gov.cn/art/2022/12/1/art_71490_4269009.html' },
    { 新疆维吾尔自治区: 'http://rst.xinjiang.gov.cn/xjrst/zxfb/201303/f4c568655c5943d5b55c801d40c31b7e.shtml' },
    { 西藏自治区: 'http://www.xizang.gov.cn/zwgk/xxfb/zbwj/202207/t20220714_314174.html' },
    { 福建省: 'http://www.gov.cn/xinwen/2022-06/06/content_5694256.htm' },
    { 云南省: 'http://hrss.yn.gov.cn/NewsView.aspx?NewsID=44101&ClassID=556' },
    { 安徽省: 'https://www.yd.gov.cn/xxgk/detail/content/627c6b3f8866888f588b4567.html' },
    { 浙江省: 'http://www.hzsc.gov.cn/art/2022/7/11/art_1229430178_58973830.html' },
    { 北京市: 'http://www.beijing.gov.cn/zhengce/zhengcefagui/202206/t20220624_2750647.html' },
    { 天津市: 'https://www.tj.gov.cn/sy/tjxw/202207/t20220708_5928900.html' },
    { 河北省: 'https://rst.hebei.gov.cn/a/news/guonei/2015/0706/1596.html' },
    { 山西省: 'http://rst.shanxi.gov.cn/zwyw/zcfg/bmwj/201407/t20140708_2908434.html' },
    { 内蒙古自治区: 'http://www.huiminqu.gov.cn/zwgk_new/bmxxgk_new/zfzcbm/rlzyshbzj/zfxxgkzl_46892/fdzdgknr/zcjd/202204/t20220427_1237584.html' },
    { 辽宁省: 'http://www.ln.gov.cn/ywdt/tjdt/202207/t20220718_4617396.html' },
    { 吉林省: 'http://ccrs.changchun.gov.cn/yshj/202009/t20200907_2510177.html' },
    { 黑龙江省: 'http://hrss.hlj.gov.cn/hrss/c111736/202211/c00_31397737.shtml' },
    { 上海市: 'http://rsj.sh.gov.cn/tqtwj_17340/20211105/t0035_1403538.html' },
    { 江苏省: 'http://www.js.gov.cn/art/2022/6/21/art_84418_10510042.html' },
    { 山东省: 'http://www.shandong.gov.cn/art/2019/1/30/art_100623_25888.html' },
    { 河南省: 'http://www.henan.gov.cn/2022/11-26/2646842.html' },
    { 湖北省: 'http://www.mohrss.gov.cn/wap/xw/dfdt/202207/t20220707_456716.html' },
    { 重庆市: 'http://www.cq.gov.cn/zwgk/zfxxgkml/lwlb/cqzxd/zzdt/202206/t20220621_10836272.html' },
    { 四川省: 'http://rst.sc.gov.cn/rst/jdhy/2022/6/30/8852fa937f6d4f1e96efcc0796717b0d.shtml' },
    { 贵州省: 'https://www.bijie.gov.cn/bm/bjsrsj/zwgk/jycy/jycjgk/202207/t20220719_75581302.html' },
    { 陕西省: 'https://rst.shaanxi.gov.cn/newstyle/pub_newsshow.asp?id=1017431&chid=100694' },
    { 青海省: 'http://www.gov.cn/fuwu/2014-07/09/content_2714468.htm' },
    { 宁夏回族自治区: 'http://hrss.nx.gov.cn/ztlm/jysrkzz/202207/t20220704_3596986.html' },
    { 香港特别行政区: 'http://hrss.gd.gov.cn/gkmlpt/content/3/3519/post_3519753.html#4056' },
    { 澳门特别行政区: 'http://hrss.gd.gov.cn/gkmlpt/content/3/3519/post_3519753.html#4056' },
    { 台湾省: 'http://www.tailian.org.cn/jy/' },
    ]
    const option = {
        backgroundColor: '#ffffff',//地图背景色
        title: {
            text: '全国就业政策图',
            textStyle: {
                color: 'black',
                fontSize: 22
            }
        },
        series: [{
            name: "就业政策",
            type: 'map', // 告诉echarts 要去渲染的是一个地图
            map: 'china2',// 告诉echarts  要去渲染中国地图
            label: {
                normal: {
                    show: true, // 是否显示对应地名
                    textStyle: { //字体颜色
                        color: 'rgba(0,0,0,.7)',
                        fontWeight: 700,
                    }
                },
                emphasis: {
                    show: true,
                    textStyle: {
                        color: '#ffffff',
                        fontSize: 16
                    }
                }
            },
            roam: true,
            zoom: 1.25,// 控制地图的放大和缩小
            scaleLimit: {
                min: '1'
            },
            selectedMode: 'single',
            select: {
                label: {
                    show: true,
                    color: '#ffffff',
                    fontSize: 16

                },
                itemStyle: {
                    areaColor: '#e41908',
                    shadowBlur: 2,
                    borderWidth: 2,
                }
            },
            itemStyle: {
                normal: {
                    borderWidth: 2, // 地图边框宽度
                    borderColor: 'gray', // 地图边框颜色
                    areaColor: '#bbcdc5' // 地图颜色
                },
                emphasis: {//选中省份的颜色
                    areaColor: '#e41908',
                    shadowBlur: 2,
                    borderWidth: 2,
                },
            },
            data: ''
        }],
        visualMap: [{
            type: 'piecewise',
            show: true,
            // splitNumber:4
            pieces: [           // 分段
                { min: 50 },
                { min: 40, max: 49 },
                { min: 30, max: 39 },
                { min: 20, max: 29 },
                { min: 1, max: 19 }
            ],
            textStyle: {
                color: '#004e92',
                fontSize: 14,
            },
            inRange: {
                symbol: 'rect',
                color: ['#e0ffff', '#006edd']
            },
            itemWidth: 20,
            itemHeight: 10
        }],
        tooltip: {
            trigger: 'item',
        },
    }

    function init() {
        let myChart = echarts.getInstanceById('map'); //有的话就获取已有echarts实例的DOM节点。
        if (myChart == null) { // 如果不存在，就进行初始化。
            myChart = echarts.init($('#map')[0]);
        }
        myChart.setOption(option)
        myChart.on('click', (params) => {
            if (!params.data) {
                alert('该地区暂无数据')
            }
            else {
                $('#title > a').text(params.data.name + '--就业政策')
                // $('li').remove()
                // params.data.data.forEach(item=> {
                //     $('#list').append(`<li><a href=${item.url} class=info target="_blank">${item.title}</a></li>`)
                // });
                let src = region.find(item => Object.keys(item)[0].includes(params.data.name))
                setTimeout(() => {
                    window.open(Object.values(src)[0]);
                }, 3000)
                if (src) {
                    $('iframe').attr('src', Object.values(src)[0])
                    $('#title > a').attr('href', Object.values(src)[0])
                }
                else {
                    alert('暂无数据')
                }
            }

        })
        $(window).resize(() => { myChart.resize() })
    }
    $(function () {
        $.getJSON('info.json', (info) => {
            option.series[0].data = info.map(i => ({
                name: i.name,
                value: i.data.length,
                data: i.data
            }))

            $.getJSON('china2.json', (data) => {
                echarts.registerMap('china2', data)
                init()
                // let controll=[]
                // let one=gui.addFolder('地图移入文本颜色');
                // controll.push(one.addColor(option.series[0].label.emphasis.textStyle,'color'))
                // let two=gui.addFolder('地图选择文本颜色');
                // controll.push(two.addColor(option.series[0].select.label,'color'))
                // let three=gui.addFolder('地图选择区域颜色');
                // controll.push(three.addColor(option.series[0].select.itemStyle,'areaColor'))
                // let four=gui.addFolder('地图无数据区域颜色');
                // controll.push(four.addColor(option.series[0].itemStyle.normal,'areaColor'))
                // let five=gui.addFolder('地图移入区域颜色');
                // controll.push(five.addColor(option.series[0].itemStyle.emphasis,'areaColor'))
                // let six=gui.addFolder('地图颜色范围(最低到最高)');
                // controll.push(six.addColor(option.visualMap[0].inRange.color,'0'))
                // controll.push(six.addColor(option.visualMap[0].inRange.color,'1'))
                // controll.map(item=>{
                //     item.onChange((n)=>{
                //        init()
                //     }) 
                //     })
            })
        })
    })
</script>

</html>